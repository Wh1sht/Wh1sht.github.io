{"title":"kali 安装 Docker","slug":"kali/kali_install_docker","date":"2018-07-04T14:49:13.604Z","updated":"2018-07-04T15:17:13.431Z","comments":true,"path":"api/articles/kali/kali_install_docker.json","photos":[],"link":"","excerpt":"kali使用Docker搭建靶场环境","covers":null,"content":"<p>kali使用Docker搭建靶场环境</p>\n<a id=\"more\"></a>\n<h3 id=\"查看Kali-linux内核版本-gt-3-10\"><a href=\"#查看Kali-linux内核版本-gt-3-10\" class=\"headerlink\" title=\"查看Kali linux内核版本(&gt;3.10)\"></a>查看Kali linux内核版本(&gt;3.10)</h3><p>Docker需要一个64位的安装环境</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uname -r</span><br></pre></td></tr></table></figure>\n<h3 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h3><p>首先在/etc/apt/sources.list.d/创建两个文件backports.list和docker.list</p>\n<p>分别添加：</p>\n<p>Backports.list:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">deb</span> http://http.debian.net/debian wheezy-backports main</span><br></pre></td></tr></table></figure>\n<p>Docker.list:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">deb</span> http<span class=\"variable\">s:</span>//apt.dockerproject.org/repo debian-wheezy main</span><br></pre></td></tr></table></figure>\n<h3 id=\"更新存储库信息，确保apt使用https方法，并安装CA证书，添加新的GPG-key（这里可能会出错，多试几次，或者去找找其他的key）\"><a href=\"#更新存储库信息，确保apt使用https方法，并安装CA证书，添加新的GPG-key（这里可能会出错，多试几次，或者去找找其他的key）\" class=\"headerlink\" title=\"更新存储库信息，确保apt使用https方法，并安装CA证书，添加新的GPG key（这里可能会出错，多试几次，或者去找找其他的key）\"></a>更新存储库信息，确保apt使用https方法，并安装CA证书，添加新的GPG key（这里可能会出错，多试几次，或者去找找其他的key）</h3><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-get install apt-transport-https ca-certificates gnupg2 apt-key adv --keyserver hkp://p80.pool.sks-keyservers.<span class=\"built_in\">net</span>:<span class=\"number\">80</span> --recv-keys <span class=\"number\">58118</span>E89F3A912897C070ADBF76221572C52609D</span><br></pre></td></tr></table></figure>\n<h3 id=\"再更新apt存储库，并验证apt存储库是正确的\"><a href=\"#再更新apt存储库，并验证apt存储库是正确的\" class=\"headerlink\" title=\"再更新apt存储库，并验证apt存储库是正确的\"></a>再更新apt存储库，并验证apt存储库是正确的</h3><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-cache policy docker-engine</span><br></pre></td></tr></table></figure>\n<h3 id=\"安装Docker\"><a href=\"#安装Docker\" class=\"headerlink\" title=\"安装Docker\"></a>安装Docker</h3><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install docker-engine</span><br></pre></td></tr></table></figure>\n<h3 id=\"启动服务\"><a href=\"#启动服务\" class=\"headerlink\" title=\"启动服务\"></a>启动服务</h3><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service docker <span class=\"built_in\">start</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h3><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run hello-world</span><br></pre></td></tr></table></figure>\n<p>无错误表示成功</p>\n<h3 id=\"后续\"><a href=\"#后续\" class=\"headerlink\" title=\"后续\"></a>后续</h3><h4 id=\"更新Docker\"><a href=\"#更新Docker\" class=\"headerlink\" title=\"更新Docker\"></a>更新Docker</h4><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get upgrade docker-engine</span><br></pre></td></tr></table></figure>\n<h5 id=\"卸载docker软件包\"><a href=\"#卸载docker软件包\" class=\"headerlink\" title=\"卸载docker软件包\"></a>卸载docker软件包</h5><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get purge docker-engine</span><br></pre></td></tr></table></figure>\n<h5 id=\"卸载docker所有程序包和依赖关系\"><a href=\"#卸载docker所有程序包和依赖关系\" class=\"headerlink\" title=\"卸载docker所有程序包和依赖关系\"></a>卸载docker所有程序包和依赖关系</h5><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get autoremove --purge docker-engine</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除所有图像，容器和卷\"><a href=\"#删除所有图像，容器和卷\" class=\"headerlink\" title=\"删除所有图像，容器和卷\"></a>删除所有图像，容器和卷</h5><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure>\n","categories":[],"tags":[{"name":"kali","slug":"kali","count":1,"path":"api/tags/kali.json"}]}