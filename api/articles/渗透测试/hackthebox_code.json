{"title":"hackthebox--how to get the invite code","slug":"渗透测试/hackthebox_code","date":"2018-05-24T15:49:11.856Z","updated":"2018-05-24T16:15:39.071Z","comments":true,"path":"api/articles/渗透测试/hackthebox_code.json","photos":[],"link":"","excerpt":"最近找到了一个靶场，当时没怎么看懂是怎么回事，可能是英语太菜了吧。哈哈哈，仔细一看还挺有趣的，这个注册的流程有意思。","covers":["./images/hackthebox/hack.png","./images/hackthebox/01.png","./images/hackthebox/02.png","./images/hackthebox/03.png","./images/hackthebox/07.png","./images/hackthebox/08.png"],"content":"<p>最近找到了一个靶场，当时没怎么看懂是怎么回事，可能是英语太菜了吧。哈哈哈，仔细一看还挺有趣的，这个注册的流程有意思。</p>\n<a id=\"more\"></a>\n<p><img src=\"./images/hackthebox/hack.png\" alt=\"\"></p>\n<h3 id=\"打开注册界面\"><a href=\"#打开注册界面\" class=\"headerlink\" title=\"打开注册界面\"></a>打开注册界面</h3><p><img src=\"./images/hackthebox/01.png\" alt=\"\"></p>\n<h3 id=\"F12大法6\"><a href=\"#F12大法6\" class=\"headerlink\" title=\"F12大法6\"></a>F12大法6</h3><p>查看源代码，看见有个<a href=\"https://www.hackthebox.eu/js/inviteapi.min.js，还认识是邀请接口吧\" target=\"_blank\" rel=\"noopener\">https://www.hackthebox.eu/js/inviteapi.min.js，还认识是邀请接口吧</a></p>\n<p><img src=\"./images/hackthebox/02.png\" alt=\"\"></p>\n<p>js解密一下</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">verifyInviteCode</span>(<span class=\"params\">code</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> formData = &#123;</span><br><span class=\"line\">        <span class=\"string\">\"code\"</span>: code</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    $.ajax(&#123;</span><br><span class=\"line\">        type: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">        dataType: <span class=\"string\">\"json\"</span>,</span><br><span class=\"line\">        data: formData,</span><br><span class=\"line\">        url: <span class=\"string\">'/api/invite/verify'</span>,</span><br><span class=\"line\">        success: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(response)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        error: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(response)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">makeInviteCode</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    $.ajax(&#123;</span><br><span class=\"line\">        type: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">        dataType: <span class=\"string\">\"json\"</span>,</span><br><span class=\"line\">        url: <span class=\"string\">'/api/invite/how/to/generate'</span>,</span><br><span class=\"line\">        success: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(response)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        error: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(response)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>或者–makeInviteCode<br>控制台运行这个函数<br>在post响应中获取到一串base64编码或者rot13编码，然后进行解码</p>\n<p><img src=\"./images/hackthebox/03.png\" alt=\"\"><br><img src=\"./images/hackthebox/04.png\" alt=\"\"><br><img src=\"./images/hackthebox/05.png\" alt=\"\"><br><img src=\"./images/hackthebox/06.png\" alt=\"\"></p>\n<h3 id=\"post请求\"><a href=\"#post请求\" class=\"headerlink\" title=\"post请求\"></a>post请求</h3><p><img src=\"./images/hackthebox/07.png\" alt=\"\"></p>\n<p>得到一个base64加密后的invitecode，解码。</p>\n<p><img src=\"./images/hackthebox/08.png\" alt=\"\"></p>\n<p>ps:说到注册，我当时注册了好久都没有成功，最后我翻墙就注册成功了。</p>\n","categories":[],"tags":[{"name":"渗透测试","slug":"渗透测试","count":1,"path":"api/tags/渗透测试.json"}]}