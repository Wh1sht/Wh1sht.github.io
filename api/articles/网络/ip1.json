{"title":"IP地址和子网划分","slug":"网络/ip1","date":"2018-04-26T07:46:34.392Z","updated":"2018-04-27T16:00:19.545Z","comments":true,"path":"api/articles/网络/ip1.json","photos":[],"link":"","excerpt":"你说你有点难懂","covers":["./images/IP/mm.jpg","./images/IP/ip.png","./images/IP/ip02.png","./images/IP/ip03.png","./images/IP/ip04.png","./images/IP/ip05.png","./images/IP/ip06.png","./images/IP/ip07.png","./images/IP/ip08.png","./images/IP/ip09.png"],"content":"<blockquote>\n<p>你说你有点难懂</p>\n</blockquote>\n<a id=\"more\"></a>\n<p>好啦好啦，上课了啊，玩手机的同学收起来了,看黑板</p>\n<p><img src=\"./images/IP/mm.jpg\" alt=\"\"></p>\n<h2 id=\"ip地址的结构和分类\"><a href=\"#ip地址的结构和分类\" class=\"headerlink\" title=\"ip地址的结构和分类\"></a>ip地址的结构和分类</h2><p>ip地址是一个由32位二进制数组成，用点分十进制表示，每八位一组，用一个十进制表示即0～255，每组用”.”分隔开，例如172.16.22.204</p>\n<p><img src=\"./images/IP/ip.png\" alt=\"ip表示\"></p>\n<hr>\n<p><img src=\"./images/IP/ip02.png\" alt=\"ip分类\"></p>\n<p><img src=\"./images/IP/ip03.png\" alt=\"ip03.png\"><br>D类是组播地址，E类保留其中有个环回地址为：127.0.0.0-127.255.255.255这段地址代表本机地址</p>\n<h3 id=\"子网掩码\"><a href=\"#子网掩码\" class=\"headerlink\" title=\"子网掩码\"></a>子网掩码</h3><ol>\n<li>子网掩码用于识别ip地址中的网络地址和主机地址。</li>\n<li>子网掩码也是32位二进制数字，在子网掩码中，对应于网络地址部分全用1表示，主机部分全用0表示 。</li>\n<li>还可以用网络前缀表示子网掩码，即”／&lt;网络地址位数&gt;”，如172.16.45.0/24表示B类网络172.16.45.0的子网掩码为255.255.255.0</li>\n</ol>\n<h4 id=\"默认子网掩码\"><a href=\"#默认子网掩码\" class=\"headerlink\" title=\"默认子网掩码\"></a>默认子网掩码</h4><p>A类地址：255.0.0.0<br>B类地址：255.255.0.0<br>C类地址：255.255.255.0</p>\n<h3 id=\"子网划分\"><a href=\"#子网划分\" class=\"headerlink\" title=\"子网划分\"></a>子网划分</h3><p>在开始子网划分之前你要熟悉2^n的值和掩码值</p>\n<p><img src=\"./images/IP/ip04.png\" alt=\"ip04.png\"></p>\n<p><img src=\"./images/IP/ip05.png\" alt=\"ip05.png\"></p>\n<p>类型1：已知IP和子网掩码，求产生的子网数量，主机数量。</p>\n<p>解：</p>\n<ul>\n<li>可用子网数量=2^n -2 ，（n子网位数）</li>\n<li>主机数量=2^m-2 ，（m主机位数）</li>\n</ul>\n<p>类型2：已知IP和主机数量（或子网数量），求子网掩码。</p>\n<p>解：</p>\n<ul>\n<li>2^n -2&gt;=子网数量 =&gt;n</li>\n<li>2^m-2&gt;=主机数量 =&gt;m</li>\n</ul>\n<p>类型3：已知IP和子网掩码，求网络地址，广播地址，可用主机范围。</p>\n<p>解：</p>\n<ul>\n<li>网络地址：将IP和子网掩码转为二进制，再将IP地址的主机位全变为0 即可；</li>\n<li>广播地址：将IP和子网掩码转为二进制，再将IP地址的主机位全变为1即可；</li>\n<li>可用主机范围＝网络地址+1～广播地址-1</li>\n</ul>\n<h3 id=\"Practice\"><a href=\"#Practice\" class=\"headerlink\" title=\"Practice\"></a>Practice</h3><p>eg: IP地址为128.36.199.3/20算出网络地址、广播地址、地址范围、主机数。</p>\n<p>传统法：</p>\n<p><img src=\"./images/IP/ip06.png\" alt=\"ip06.png\"></p>\n<p>快速法：<br>128.36.199.3/20<br>由子网掩码可以看出在第三段划分<br>24-20=4  2^4=16<br>网络地址：199/16*16=192<br>广播地址：192+16-1=207</p>\n<p>PS:如果是在一二三段划分后面段则网络地址用0代替广播地址用255代替</p>\n<p>地址范围是： 网络地址+1 至 广播地址-1<br>本例的网络范围是：128.36.192.1–128.36.207.254  </p>\n<p>主机数=2^主机位-2=2^12-2=4094</p>\n<p>eg：IP地址为193.1.1.165 子网掩码是255.255.255.224。算出网络地址、广播地址、地址范围、主机数。</p>\n<p>传统法：</p>\n<p><img src=\"./images/IP/ip07.png\" alt=\"ip07.png\"></p>\n<p>快速法：<br>193.1.1.165   255.255.255.224<br>由子网掩码可以看出是在第四段划分<br>255-224=32<br>网络地址：165/32*32=160<br>广播地址：160+32-1=191</p>\n<p>地址范围是： 网络地址+1 至 广播地址-1<br>本例的网络范围是：193.1.1.161—193.1.1.190</p>\n<p>主机数=2^主机位-2=2^5-2=30</p>\n<h2 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a>小结</h2><p>快速法公式：<br>用地址位表示时：</p>\n<ul>\n<li>求n=2^m    m=（在求的段的最大值（比如1:8、2:16、3:24、4:32）减去地址位）</li>\n<li>网络地址=x/n*n       x=表示ip的第几段的数值  </li>\n<li>广播地址=网络地址+n-1</li>\n<li>如果是在一二三段划分后面段则网络地址用0代替，广播地址用255代替</li>\n</ul>\n<p>存在计算新的网络id(比如要4个机房，每个机房25,运用类型1进行分析，要考虑下全1全0的情况，每段范围你会发现就是加个n)</p>\n<p>在进行子网划分越少往主机位借，越大往网络为借</p>\n<h3 id=\"思考题\"><a href=\"#思考题\" class=\"headerlink\" title=\"思考题\"></a>思考题</h3><p>在C类地址中，一个网段怎么才能容纳267台主机数，写出IP地址段、网关、子网掩码。</p>\n<p>补充：</p>\n<p>超网合并</p>\n<ul>\n<li>子网掩码左移n位，能够合并2^n个连续的网段。但不是任意2^n个连续的网段都能通过左移n位来合并成一个网段。</li>\n<li>如果连续的2^n个网段中的第1个网络号能被能被2^n整除，就能够通过左移n位来合并这些网段。</li>\n</ul>\n<p>【实例分析】判断四个网段能否合并（192.168.4.0/24、192.168.5.0/24、192.168.6.0/24、192.168.7.0/24）</p>\n<p><img src=\"./images/IP/ip08.png\" alt=\"ip08.png\"></p>\n<p>　　①从图中可以看出，当合并4个子网时（子网掩码左移2位），4个子网处于同一个网段，因此可以合并。<br>　　②规律：可合并4个网络，只要第1个网络的网络号（192.168.4），其中的4写成二进制后面两位是00，表示这个IP地址是可以被4整除的，所以可以合并。</p>\n<p>【实例分析】不能进行合并的网段（192.168.1.0/24和192.168.2.0/24）</p>\n<p><img src=\"./images/IP/ip09.png\" alt=\"ip09.png\"></p>\n<p>　　①从上图中可以看出，当子网掩码向左移到1位时（即变为255.255.254.0），两个网段还是不相同。所以这两个网段不能合并。<br>　　②规律：要合并2个网段，第1个网络的网络号（192.168.1），其中的1不能被2整除，所以不能合并。</p>\n<h3 id=\"code\"><a href=\"#code\" class=\"headerlink\" title=\"code\"></a>code</h3><hr>\n<p>由于编程太菜，本人不喜欢编程，就随便写了下，可能有bug<br>附上我写求ip划分的垃圾代码吧<br><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">fun</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span>(n==<span class=\"number\">1</span>)<span class=\"keyword\">return</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> fun(n<span class=\"number\">-1</span>)*<span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">putfun</span><span class=\"params\">(<span class=\"keyword\">int</span> a[],<span class=\"keyword\">int</span> n)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;n;i++)</span><br><span class=\"line\">     <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d.\"</span>,a[i]);</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\b \\b\\n\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">clsfun</span><span class=\"params\">(<span class=\"keyword\">int</span> a[],<span class=\"keyword\">int</span> n,<span class=\"keyword\">int</span> m)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;n;i++)</span><br><span class=\"line\">     a[i]=m;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> a[<span class=\"number\">4</span>],b[<span class=\"number\">4</span>],c[<span class=\"number\">4</span>]=&#123;<span class=\"number\">0</span>&#125;,x,i,n;</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"请按格式输入：(比如192.168.34.67/22)&gt;&gt;&gt;\"</span>);</span><br><span class=\"line\">   <span class=\"built_in\">scanf</span>(<span class=\"string\">\"%d.%d.%d.%d/%d\"</span>,a,a+<span class=\"number\">1</span>,a+<span class=\"number\">2</span>,a+<span class=\"number\">3</span>,&amp;x);</span><br><span class=\"line\">   b[x/<span class=\"number\">8</span>]=fun((x/<span class=\"number\">8</span>+<span class=\"number\">1</span>)*<span class=\"number\">8</span>-x);</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;x/<span class=\"number\">8</span>;i++)</span><br><span class=\"line\">     c[i]=<span class=\"number\">255</span>;</span><br><span class=\"line\">   c[x/<span class=\"number\">8</span>]=<span class=\"number\">256</span>-b[x/<span class=\"number\">8</span>];</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"子网掩码:\"</span>);</span><br><span class=\"line\">   putfun(c,<span class=\"number\">4</span>);</span><br><span class=\"line\">   clsfun(c,<span class=\"number\">4</span>,<span class=\"number\">0</span>);</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;x/<span class=\"number\">8</span>;i++)</span><br><span class=\"line\">     c[i]=a[i];</span><br><span class=\"line\">   c[x/<span class=\"number\">8</span>]=a[i]/b[i]*b[i];</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"网络地址:\"</span>);</span><br><span class=\"line\">   putfun(c,<span class=\"number\">4</span>);</span><br><span class=\"line\">   clsfun(c,<span class=\"number\">4</span>,<span class=\"number\">255</span>);</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;x/<span class=\"number\">8</span>;i++)</span><br><span class=\"line\">      c[i]=a[i];</span><br><span class=\"line\">   c[x/<span class=\"number\">8</span>]=(a[i]/b[i]+<span class=\"number\">1</span>)*b[i]<span class=\"number\">-1</span>;</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"广播地址\"</span>);</span><br><span class=\"line\">   putfun(c,<span class=\"number\">4</span>);</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">0</span>; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","categories":[],"tags":[{"name":"网络,IP","slug":"网络-IP","count":1,"path":"api/tags/网络-IP.json"}]}